var pg = require('pg')
var cadence = require('cadence')
var abend = require('abend')
var brick = require('.')

brick.defaults.builder = 'pg'

cadence(function(async) {
  async([pg.end.bind(pg)], function() {
    pg.connect('townstage_auto_development', async())
  }, function(client, done) {
    async([done], function() {
      client.query(brick('SELECT id, headline FROM events WHERE id = ?', 2211).build(), async())
    }, function(result) {
      console.log('Rows', result.rows)
    })
  })
})(function(err) {
  if (err) { console.error(err) }
})
